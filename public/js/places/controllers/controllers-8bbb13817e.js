"use strict";function _classCallCheck(e,l){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,l){for(var t=0;t<l.length;t++){var a=l[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(l,t,a){return t&&e(l.prototype,t),a&&e(l,a),l}}(),PlacesController=function(){function e(l,t){_classCallCheck(this,e),this.places=l.query(),this.deps={Place:l,$modal:t}}return _createClass(e,[{key:"removePlace",value:function(e){this.deps.$modal.open({templateUrl:"templates/places/removing_modal.html",controller:"PlaceRemovingModalController as c",size:"sm",resolve:{place:function(){return e}}})}}]),e}();PlacesController.$inject=["Place","$modal"];var PlaceRemovingModalController=function(){function e(l,t,a){_classCallCheck(this,e),this.place=a,this.deps={$modalInstance:l,$state:t}}return _createClass(e,[{key:"removePlace",value:function(){var e=this;this.place.$delete(function(){e.deps.$modalInstance.dismiss("ok"),e.deps.$state.go(e.deps.$state.current,{},{reload:!0})})}},{key:"cancel",value:function(){this.deps.$modalInstance.dismiss("cancel")}}]),e}();PlaceRemovingModalController.$inject=["$modalInstance","$state","place"];var NewPlaceController=function(){function e(l,t,a){var n=this;_classCallCheck(this,e),this.place=new l({latitude:54.312267,longitude:48.395505,croppedImage:null}),this.options={map:{center:{latitude:54.312267,longitude:48.395505},zoom:8},point:{id:0,icon:"images/marker.png",draggable:!0},events:{click:function(e,l,a){var o=a[0];n.place.latitude=o.latLng.lat(),n.place.longitude=o.latLng.lng(),t.$apply()}}},this.sourceImage=null,this.deps={Place:l,$state:a}}return _createClass(e,[{key:"savePlace",value:function(){var e=this;this.place.$save(function(){e.deps.$state.go("places.all")})}}]),e}();NewPlaceController.$inject=["Place","$scope","$state"];var EditPlaceController=function(){function e(l,t,a,n){var o=this;_classCallCheck(this,e),this.place=l.get({id:n.id},function(){o.options={map:{center:{latitude:o.place.latitude,longitude:o.place.longitude},zoom:8},point:{id:0,icon:"images/marker.png",draggable:!0},events:{click:function(e,l,a){var n=a[0];o.place.latitude=n.latLng.lat(),o.place.longitude=n.latLng.lng(),t.$apply()}}}}),this.deps={Place:l,$state:a}}return _createClass(e,[{key:"savePlace",value:function(){var e=this;this.place.$update(function(){e.deps.$state.go("places.all")})}}]),e}();EditPlaceController.$inject=["Place","$scope","$state","$stateParams"];var controllers=angular.module("app.places.controllers",[]);controllers.controller("PlacesController",PlacesController),controllers.controller("NewPlaceController",NewPlaceController),controllers.controller("EditPlaceController",EditPlaceController),controllers.controller("PlaceRemovingModalController",PlaceRemovingModalController);